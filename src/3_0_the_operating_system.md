# 操作系统

操作系统是我们作为程序员所做的一切的中心（嗯，除非您正在[编写操作系统](https://os.phil-opp.com/)或处于[嵌入式领域](https://rust-embedded.github.io/book/)），因此，我们无法在不稍微详细地讨论操作系统的情况下讨论任何编程基础知识。

## 操作系统角度的并发性

<div style="color: back;  font-style: italic; font-size: 1.2em">"自上世纪90年代以来，操作系统一直在“伪装”同步执行"</div>

这与我在第一章中谈到的内容相关，当时我说**并发**需要在一个参考框架内讨论，并且我解释了操作系统可能会在任何时候停止和启动您的进程。

我们所说的同步代码在大多数情况下是指对我们程序员来说看起来是同步的代码。操作系统和CPU都不生活在完全同步的世界中。

操作系统使用**抢占式多任务处理**，只要您运行的操作系统是抢占式调度进程的，您就无法保证您的代码会按照指令一步一步地执行而不受干扰。

操作系统将确保所有重要的进程都获得一些CPU时间来取得进展。

> 当我们谈论拥有4-6-8-12个物理核心的现代计算机时，情况就不那么简单了，因为如果系统的负载很小，您实际上可能会在其中一个CPU上连续执行代码。这里的重要部分是，您无法确定，也无法保证您的代码会被连续执行。


## 与操作系统搭档

在编程时，往往容易忘记在关注效率时需要合作的许多组成部分。当您发起一个网络请求时，您不是要求CPU或网络卡为您做某事，而是要求操作系统为您与网络卡进行通信。

作为程序员，您无法使系统在不充分利用操作系统的情况下达到最佳效率。您基本上无法直接访问硬件。

然而，这也意味着要从底层了解一切，您还需要了解操作系统如何处理这些任务。

为了能够与操作系统一起工作，我们需要知道如何与操作系统进行通信，这正是我们接下来要讨论的内容。
